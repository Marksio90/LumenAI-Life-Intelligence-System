# ==============================================================================
# LumenAI Kubernetes Secrets Template
# ==============================================================================
#
# ⚠️  CRITICAL SECURITY WARNING ⚠️
#
# DO NOT commit actual secrets to git!
# This is a TEMPLATE file showing the structure of secrets needed.
#
# ==============================================================================
# HOW TO CREATE SECRETS
# ==============================================================================
#
# Option 1: Using kubectl (Simple, for development)
# --------------------------------------------------
# kubectl create secret generic lumenai-backend-secrets \
#   --from-literal=MONGODB_USERNAME="lumenai_user" \
#   --from-literal=MONGODB_PASSWORD="$(openssl rand -base64 32)" \
#   --from-literal=JWT_SECRET_KEY="$(openssl rand -hex 64)" \
#   --from-literal=JWT_REFRESH_SECRET_KEY="$(openssl rand -hex 64)" \
#   --from-literal=OPENAI_API_KEY="your-actual-openai-key" \
#   --from-literal=ANTHROPIC_API_KEY="your-actual-anthropic-key" \
#   --from-literal=COHERE_API_KEY="your-actual-cohere-key" \
#   --from-literal=GOOGLE_CLIENT_ID="your-google-client-id" \
#   --from-literal=GOOGLE_CLIENT_SECRET="your-google-client-secret" \
#   --from-literal=REDIS_PASSWORD="" \
#   --from-literal=QDRANT_API_KEY="" \
#   --from-literal=SENTRY_DSN="" \
#   --namespace=default
#
#
# Option 2: Using Sealed Secrets (Recommended for production)
# ------------------------------------------------------------
# 1. Install Sealed Secrets:
#    kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml
#
# 2. Install kubeseal CLI:
#    brew install kubeseal  # macOS
#    # or download from https://github.com/bitnami-labs/sealed-secrets/releases
#
# 3. Create a regular secret file (DON'T commit this!):
#    kubectl create secret generic lumenai-backend-secrets \
#      --from-literal=MONGODB_PASSWORD="..." \
#      --dry-run=client -o yaml > temp-secret.yaml
#
# 4. Seal it:
#    kubeseal -f temp-secret.yaml -w sealed-secret.yaml
#
# 5. Commit sealed-secret.yaml (safe to commit!)
#    git add sealed-secret.yaml
#
# 6. Delete temp file:
#    rm temp-secret.yaml
#
#
# Option 3: External Secrets Operator (Best for production)
# ----------------------------------------------------------
# Use AWS Secrets Manager, GCP Secret Manager, Azure Key Vault, or HashiCorp Vault
# See: https://external-secrets.io/
#
#
# Option 4: Manual YAML (⚠️ NEVER commit to git!)
# ------------------------------------------------
# If you must use a YAML file:
# 1. Copy this template to k8s/base/secrets.yaml
# 2. Fill in actual values
# 3. Apply: kubectl apply -f k8s/base/secrets.yaml
# 4. DELETE the file immediately: rm k8s/base/secrets.yaml
# 5. Make sure secrets.yaml is in .gitignore
#
# ==============================================================================
# TEMPLATE (Replace all values with actual secrets)
# ==============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: lumenai-backend-secrets
  labels:
    app: lumenai
    component: backend
type: Opaque
stringData:
  # ==============================================================================
  # Database Credentials
  # ==============================================================================
  MONGODB_USERNAME: "REPLACE_WITH_ACTUAL_USERNAME"
  MONGODB_PASSWORD: "REPLACE_WITH_STRONG_PASSWORD"  # Generate: openssl rand -base64 32

  # ==============================================================================
  # Redis Authentication
  # ==============================================================================
  REDIS_PASSWORD: ""  # Leave empty if not using Redis auth

  # ==============================================================================
  # JWT Secrets (CRITICAL - Must be strong random strings)
  # ==============================================================================
  JWT_SECRET_KEY: "REPLACE_WITH_64_CHAR_HEX_STRING"  # Generate: openssl rand -hex 64
  JWT_REFRESH_SECRET_KEY: "REPLACE_WITH_DIFFERENT_64_CHAR_HEX_STRING"  # Generate: openssl rand -hex 64

  # ==============================================================================
  # LLM API Keys
  # ==============================================================================
  OPENAI_API_KEY: "sk-REPLACE_WITH_ACTUAL_OPENAI_KEY"
  COHERE_API_KEY: "REPLACE_WITH_ACTUAL_COHERE_KEY"
  ANTHROPIC_API_KEY: "sk-ant-REPLACE_WITH_ACTUAL_ANTHROPIC_KEY"

  # ==============================================================================
  # Google OAuth (Optional - Only if using Google authentication)
  # ==============================================================================
  GOOGLE_CLIENT_ID: "REPLACE_WITH_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
  GOOGLE_CLIENT_SECRET: "REPLACE_WITH_GOOGLE_CLIENT_SECRET"

  # ==============================================================================
  # Qdrant Vector Database (Optional - Only if using Qdrant Cloud)
  # ==============================================================================
  QDRANT_API_KEY: ""  # Leave empty for self-hosted Qdrant

  # ==============================================================================
  # Monitoring & Error Tracking (Optional)
  # ==============================================================================
  SENTRY_DSN: ""  # Leave empty if not using Sentry

# ==============================================================================
# VERIFICATION
# ==============================================================================
# After creating the secret, verify it exists:
#   kubectl get secret lumenai-backend-secrets
#
# Check the keys (values will be base64 encoded):
#   kubectl describe secret lumenai-backend-secrets
#
# Decode a specific value (for debugging):
#   kubectl get secret lumenai-backend-secrets -o jsonpath='{.data.JWT_SECRET_KEY}' | base64 -d
#
# ==============================================================================
# ROTATION
# ==============================================================================
# Secrets should be rotated periodically. To update:
#   kubectl delete secret lumenai-backend-secrets
#   kubectl create secret generic lumenai-backend-secrets ...
#
# Or use patch:
#   kubectl patch secret lumenai-backend-secrets \
#     -p '{"stringData":{"JWT_SECRET_KEY":"new-value"}}'
#
# ==============================================================================
